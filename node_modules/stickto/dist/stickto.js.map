{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 791b5ebf7babcb06b280","webpack:///./index.js","webpack:///./Sticker.js"],"names":["root","factory","exports","module","define","amd","a","i","self","this","installedModules","__webpack_require__","moduleId","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_Sticker","stickQueue","juedge","length","sticking","danger","sticker","shouldStick","forEach","unstick","isInDangerZone","stick","smoothSwitch","document","addEventListener","$el","_ref","arguments","undefined","useClass","zIndex","_Sticker2","default","unshift","destroy","pop","cid","Sticker","_classCallCheck","$elStyle","window","getComputedStyle","classCache","styleCache","position","top","$holder","createElement","className","parentNode","insertBefore","getBoundingClientRect","Number","height","split","replacer","style","transform","getHeight","style1","style2","removeChild","holderRect","stickyStyle","copyStyle"],"mappings":"CAAA,SAAAA,EAAAC,GACA,oBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,SACA,sBAAAG,eAAAC,IACAD,UAAAH,OACA,CACA,IAAAK,EAAAL,IACA,QAAAM,KAAAD,GAAA,iBAAAJ,gBAAAF,GAAAO,GAAAD,EAAAC,IAPA,CASC,oBAAAC,UAAAC,KAAA,WACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAV,QAGA,IAAAC,EAAAO,EAAAE,IACAL,EAAAK,EACAC,GAAA,EACAX,YAUA,OANAY,EAAAF,GAAAG,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAS,GAGAR,EAAAU,GAAA,EAGAV,EAAAD,QAqCA,OAhCAS,EAAAK,EAAAF,EAGAH,EAAAM,EAAAP,EAGAC,EAAAO,EAAA,SAAAhB,EAAAiB,EAAAC,GACAT,EAAAU,EAAAnB,EAAAiB,IACAG,OAAAC,eAAArB,EAAAiB,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAT,EAAAgB,EAAA,SAAAxB,GACA,IAAAiB,EAAAjB,KAAAyB,WACA,WAA2B,OAAAzB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAQ,EAAAO,EAAAE,EAAA,IAAAA,GACAA,GAIAT,EAAAU,EAAA,SAAAQ,EAAAC,GAAsD,OAAAR,OAAAS,UAAAC,eAAAjB,KAAAc,EAAAC,IAGtDnB,EAAAsB,EAAA,GAGAtB,IAAAuB,EAAA,4GCvDA,MAAAC,EAAAxB,EAAA,uCAEA,IAAMyB,KAEN,SAASC,IACL,GAAyB,GAArBD,EAAWE,OAAf,CAGA,IAFA,IAAIC,SACAC,SACKjC,EAAI,EAAGA,EAAI6B,EAAWE,OAAQ/B,IAAK,CACxC,IAAMkC,EAAUL,EAAW7B,GAC3B,GAAIkC,EAAQC,YAAYD,GAAU,CAC9BF,EAAWE,EACX,OAGRL,EAAWO,QAAQ,SAAAF,GACfA,EAAQG,UACJH,EAAQI,mBACRL,EAASC,KAEbF,GACAA,EAASO,QAETP,GAAYC,GACZD,EAASQ,aAAaP,IA6B9BQ,SAASC,iBAAiB,SAAUZ,KAGhCS,MA5BJ,SAAgBI,GAGR,IAAAC,EAAAC,UAAAd,OAAA,QAAAe,IAAAD,UAAA,GAAAA,UAAA,MAFJE,EAEIH,EAFJG,SACAC,EACIJ,EADJI,OAEAlB,IACA,IAAMI,EAAU,IAAAe,EAAAC,QAAYP,EAAKI,EAAUC,GAC3CnB,EAAWsB,QAAQjB,MAuBnBG,QApBJ,SAAkBH,GACd,GAAIA,uBACAA,EAAQkB,UACRvB,EAAWwB,IAAInB,QAEf,IAAK,IAAIlC,EAAI,EAAGA,EAAI6B,EAAWE,OAAQ/B,IACnC,GAAIkC,EAAQS,KAAOT,EAAS,CACxB,IAAMA,EAAUL,EAAW7B,GAC3BkC,EAAQkB,UACRvB,EAAWwB,IAAInB,GACf,gVC/ChB,IAAIoB,EAAM,EACWC,aACjB,SAAAA,EAAaZ,EAAKI,EAAUC,gGAAQQ,CAAAtD,KAAAqD,GAChCD,IACApD,KAAKyC,IAAMA,EACX,IAAMc,EAAWC,OAAOC,iBAAiBhB,GACzCzC,KAAK8C,OAAS,KACVA,IACA9C,KAAK8C,OAASA,GAElB9C,KAAK0D,WAAa,GACdb,EACA7C,KAAK0D,WAAab,EAElB7C,KAAK2D,YACDC,SAAUL,EAASK,SACnBC,IAAKN,EAASM,IACdf,OAAQS,EAAST,QAGzB9C,KAAK8D,QAAUvB,SAASwB,cAAc,OACtC/D,KAAK8D,QAAQE,UAAb,2DAAoFZ,EAEpFpD,KAAKyC,IAAIwB,WAAWC,aAAalE,KAAK8D,QAAS9D,KAAKyC,+DAGpD,OAAOzC,KAAKyC,IAAI0B,4DAGhB,OAAOC,OAAOZ,OAAOC,iBAAiBzD,KAAKyC,KAAK4B,OAAOC,MAAM,MAAM,yCAEzDC,GACVvE,KAAKyC,IAAI+B,MAAMC,UAAf,eAAyCF,EAASJ,wBAAwBN,IAAMU,EAASG,aAAzF,wCAEOC,EAAQC,EAAQlE,GACnBiE,EAAOjE,IAASkE,EAAOlE,KACvBiE,EAAOjE,GAAQkE,EAAOlE,sCAI1BV,KAAK8D,QAAQG,WAAWY,YAAY7E,KAAK8D,SACzC9D,KAAK8D,QAAU,KACf9D,KAAK2D,WAAa,KAClB3D,KAAKyC,IAAM,KACXW,6CAGA,IAAIX,EAAMzC,KAAKyC,IACoB,SAA/BzC,KAAK8D,QAAQU,MAAMZ,WACnBnB,EAAMzC,KAAK8D,SACf,IAAMgB,EAAarC,EAAI0B,wBACvB,OAAIW,EAAWjB,IAAM,GAAKiB,EAAWjB,IAAMO,OAAOZ,OAAOC,iBAAiBhB,GAAK4B,OAAOC,MAAM,MAAM,0CAOlG,OADmBtE,KAAK8D,QAAQK,wBACjBN,KAAO,kCAMtB,IAAMkB,GACFnB,SAAU,QACVC,IAAK,MACLf,OAAQ9C,KAAK8C,QAEjB9C,KAAKgF,UAAUhF,KAAK8D,QAAQU,MAAOhB,OAAOC,iBAAiBzD,KAAKyC,KAAM,UACtEzC,KAAKgF,UAAUhF,KAAKyC,IAAI+B,MAAOO,EAAa,YAC5C/E,KAAKgF,UAAUhF,KAAKyC,IAAI+B,MAAOO,EAAa,OAC5C/E,KAAKgF,UAAUhF,KAAKyC,IAAI+B,MAAOO,EAAa,4CAG5C/E,KAAKgF,UAAUhF,KAAKyC,IAAI+B,MAAOxE,KAAK2D,WAAY,YAChD3D,KAAKgF,UAAUhF,KAAKyC,IAAI+B,MAAOxE,KAAK2D,WAAY,OAChD3D,KAAKgF,UAAUhF,KAAKyC,IAAI+B,MAAOxE,KAAK2D,WAAY,UAChD3D,KAAKgF,UAAUhF,KAAK8D,QAAQU,OAAQH,OAAQ,OAAQ,UACpDrE,KAAKgF,UAAUhF,KAAKyC,IAAI+B,OAAQC,UAAW,mBAAoB,gCA9ElDpB","file":"stickto.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 791b5ebf7babcb06b280","/*\r\n * @Author: zhaoye \r\n * @Date: 2018-01-17 15:06:07 \r\n * @Last Modified by: zhaoye\r\n * @Last Modified time: 2018-03-23 19:42:18\r\n */\r\nimport Sticker from './Sticker.js'\r\n\r\nconst stickQueue = []\r\n\r\nfunction juedge () {\r\n    if (stickQueue.length == 0) return\r\n    let sticking\r\n    let danger\r\n    for (let i = 0; i < stickQueue.length; i++) {\r\n        const sticker = stickQueue[i]\r\n        if (sticker.shouldStick(sticker)) {\r\n            sticking = sticker\r\n            break\r\n        }\r\n    }\r\n    stickQueue.forEach(sticker => {\r\n        sticker.unstick()\r\n        if (sticker.isInDangerZone())\r\n            danger = sticker\r\n    })\r\n    if (sticking) {\r\n        sticking.stick()\r\n    }\r\n    if (sticking && danger) {\r\n        sticking.smoothSwitch(danger)\r\n    }\r\n}\r\n\r\nfunction stick ($el, {\r\n    useClass,\r\n    zIndex,\r\n} = {}) {\r\n    juedge()\r\n    const sticker = new Sticker($el, useClass, zIndex)\r\n    stickQueue.unshift(sticker)\r\n}\r\n\r\nfunction unstick (sticker) {\r\n    if (sticker instanceof Sticker) {\r\n        sticker.destroy()\r\n        stickQueue.pop(sticker)\r\n    } else {\r\n        for (let i = 0; i < stickQueue.length; i++) {\r\n            if (sticker.$el == sticker) {\r\n                const sticker = stickQueue[i]\r\n                sticker.destroy()\r\n                stickQueue.pop(sticker)\r\n                break\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ndocument.addEventListener('scroll', juedge)\r\n\r\nexport {\r\n    stick,\r\n    unstick,\r\n}\n\n\n// WEBPACK FOOTER //\n// ./index.js","/*\r\n * @Author: zhaoye \r\n * @Date: 2018-03-23 18:06:08 \r\n * @Last Modified by: zhaoye\r\n * @Last Modified time: 2018-03-23 19:04:44\r\n */\r\nlet cid = 0\r\nexport default class Sticker {\r\n    constructor ($el, useClass, zIndex) {\r\n        cid++\r\n        this.$el = $el\r\n        const $elStyle = window.getComputedStyle($el)\r\n        this.zIndex = '20'\r\n        if (zIndex) {\r\n            this.zIndex = zIndex\r\n        }\r\n        this.classCache = ''\r\n        if (useClass) {\r\n            this.classCache = useClass\r\n        } else {\r\n            this.styleCache = {\r\n                position: $elStyle.position,\r\n                top: $elStyle.top,\r\n                zIndex: $elStyle.zIndex,\r\n            }\r\n        }\r\n        this.$holder = document.createElement('div')\r\n        this.$holder.className = `auto-generated-stick-holder auto-generated-stick-holder-${cid}`\r\n\r\n        this.$el.parentNode.insertBefore(this.$holder, this.$el)\r\n    }\r\n    getBoundingClientRect () {\r\n        return this.$el.getBoundingClientRect()\r\n    }\r\n    getHeight () {\r\n        return Number(window.getComputedStyle(this.$el).height.split('px')[0])\r\n    }\r\n    smoothSwitch (replacer) {\r\n        this.$el.style.transform = `translateY(${replacer.getBoundingClientRect().top - replacer.getHeight()}px)`\r\n    }\r\n    copyStyle (style1, style2, name) {\r\n        if (style1[name] != style2[name]) {\r\n            style1[name] = style2[name]\r\n        }\r\n    }\r\n    destroy () {\r\n        this.$holder.parentNode.removeChild(this.$holder)\r\n        this.$holder = null\r\n        this.styleCache = null\r\n        this.$el = null\r\n        cid--\r\n    }\r\n    isInDangerZone () {\r\n        let $el = this.$el\r\n        if (this.$holder.style.position == 'fixed') \r\n            $el = this.$holder\r\n        const holderRect = $el.getBoundingClientRect()\r\n        if (holderRect.top > 0 && holderRect.top < Number(window.getComputedStyle($el).height.split('px')[0]))\r\n            return true\r\n        else\r\n            return false\r\n    }\r\n    shouldStick () {\r\n        const holderRect = this.$holder.getBoundingClientRect()\r\n        if (holderRect.top <= 0)\r\n            return true\r\n        else\r\n            return false\r\n    }\r\n    stick () {\r\n        const stickyStyle = {\r\n            position: 'fixed',\r\n            top: '0px',\r\n            zIndex: this.zIndex,\r\n        }\r\n        this.copyStyle(this.$holder.style, window.getComputedStyle(this.$el), 'height')\r\n        this.copyStyle(this.$el.style, stickyStyle, 'position')\r\n        this.copyStyle(this.$el.style, stickyStyle, 'top')\r\n        this.copyStyle(this.$el.style, stickyStyle, 'zIndex')\r\n    }\r\n    unstick () {\r\n        this.copyStyle(this.$el.style, this.styleCache, 'position')\r\n        this.copyStyle(this.$el.style, this.styleCache, 'top')\r\n        this.copyStyle(this.$el.style, this.styleCache, 'zIndex')\r\n        this.copyStyle(this.$holder.style, {height: '0px'}, 'height')\r\n        this.copyStyle(this.$el.style, {transform: 'translateY(0px)'}, 'transform')\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./Sticker.js"],"sourceRoot":""}